var __hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};define(["jquery","underscore","./dist","./axis"],function(t,e,i,n){var s,o;return s=function(s){function r(){return o=r.__super__.constructor.apply(this,arguments)}return __extends(r,s),r.prototype.template="charts/editable-chart",r.prototype.events=e.extend({"click .fullsize":"toggleExpanded"},i.FieldChart.prototype.events),r.prototype.ui=e.extend({toolbar:".btn-toolbar",fullsizeToggle:".fullsize",form:".editable",xAxis:"[name=x-Axis]",yAxis:"[name=y-Axis]",series:"[name=series]"},i.FieldChart.prototype.ui),r.prototype.onRender=function(){var t;return this.options.editable===!1?(this.ui.form.detach(),this.ui.toolbar.detach()):(this.xAxis=new n.FieldAxis({el:this.ui.xAxis,collection:this.collection}),this.yAxis=new n.FieldAxis({el:this.ui.yAxis,collection:this.collection}),this.series=new n.FieldAxis({el:this.ui.series,enumerableOnly:!0,collection:this.collection}),this.model?(this.model.get("xAxis")&&this.ui.form.hide(),(t=this.model.get("expanded"))?this.expand():this.contract()):void 0)},r.prototype.customizeOptions=function(e){var i;return this.ui.status.detach(),this.ui.heading.text(e.title.text),e.title.text="",e.series[0]?(this.ui.form.hide(),i=[],e.clustered&&i.push("Clustered"),i[0]&&(this.ui.status.text(i.join(", ")).show(),this.ui.heading.append(this.$status)),this.interactive(e)&&this.enableChartEvents(),t.extend(!0,e,this.chartOptions),e.chart.renderTo=this.ui.chart[0],e):(this.ui.chart.html("<p class=no-data>Unfortunately, there is                    no data to graph here.</p>"),void 0)},r.prototype.changeChart=function(t){var e=this;return t&&t.preventDefault(),this.collection.when(function(){var i,n,s,o,r,a,l;return null==t&&((a=e.model.get("xAxis"))&&e.xAxis.$el.val(a.toString()),(l=e.model.get("yAxis"))&&e.yAxis.$el.val(l.toString()),(s=e.model.get("series"))&&e.series.$el.val(s.toString())),a=e.xAxis.getSelected(),l=e.yAxis.getSelected(),s=e.series.getSelected(),a?(r=e.model.get("_links").distribution.href,n=[a],i="dimension="+a.id,l&&(n.push(l),i=i+"&dimension="+l.id),s&&(o=l?2:1,i=i+"&dimension="+s.id),t&&e.model&&e.model.set({xAxis:a.id,yAxis:l?l.id:void 0,series:s?s.id:void 0}),e.update(r,i,n,o)):void 0})},r.prototype.disableSelected=function(e){var i,n;return i=t(e.target),this.xAxis.el===e.target?(this.yAxis.$("option").prop("disabled",!1),this.series.$("option").prop("disabled",!1)):this.yAxis.el===e.target?(this.xAxis.$("option").prop("disabled",!1),this.series.$("option").prop("disabled",!1)):(this.xAxis.$("option").prop("disabled",!1),this.yAxis.$("option").prop("disabled",!1)),""!==(n=i.val())?this.xAxis.el===e.target?(this.yAxis.$("option[value="+n+"]").prop("disabled",!0).val(""),this.series.$("option[value="+n+"]").prop("disabled",!0).val("")):this.yAxis.el===e.target?(this.xAxis.$("option[value="+n+"]").prop("disabled",!0).val(""),this.series.$("option[value="+n+"]").prop("disabled",!0).val("")):(this.xAxis.$("option[value="+n+"]").prop("disabled",!0).val(""),this.yAxis.$("option[value="+n+"]").prop("disabled",!0).val("")):void 0},r.prototype.toggleExpanded=function(){var t;return t=this.model.get("expanded"),t?this.contract():this.expand(),this.model.save({expanded:!t})},r.prototype.resize=function(){var t;return t=this.ui.chart.width(),this.chart?this.chart.setSize(t,null,!1):void 0},r.prototype.expand=function(){return this.$fullsizeToggle.children("i").removeClass("icon-resize-small").addClass("icon-resize-full"),this.$el.addClass("expanded"),this.resize()},r.prototype.contract=function(){return this.$fullsizeToggle.children("i").removeClass("icon-resize-full").addClass("icon-resize-small"),this.$el.removeClass("expanded"),this.resize()},r.prototype.hideToolbar=function(){return this.ui.toolbar.fadeOut(200)},r.prototype.showToolbar=function(){return this.ui.toolbar.fadeIn(200)},r.prototype.toggleEdit=function(){return this.ui.form.is(":visible")?this.ui.form.fadeOut(300):this.ui.form.fadeIn(300)},r}(i.FieldChart),{EditableFieldChart:s}});
//@ sourceMappingURL=editable.js.map