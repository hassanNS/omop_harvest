define(["backbone","marionette","jquery","loglevel","./core","./ui"],function(t,e,i,n,s,o){function r(t){t=t||window.event;var e;e=t.type in c?c[t.type]:!this[u],e===!0?s.trigger("visible"):e===!1&&s.trigger("hidden")}s.templates.set(s.config.get("templates",{})),s.controls.set(s.config.get("controls",{}));var a=e.TemplateCache.prototype.loadTemplate,h=e.TemplateCache.prototype.compileTemplate;e.TemplateCache.prototype.loadTemplate=function(t){var e=s.templates.get(t);return e||(e=a.call(this,t)),e},e.TemplateCache.prototype.compileTemplate=function(t){return"function"!=typeof t&&(t=h(t)),t};var l=new o.Notifications({id:"cilantro-notifications"});i("body").append(l.render().el),s.notify=l.notify,i.ajaxPrefilter(function(t){t.xhrFields={withCredentials:!0}}),s.config.get("debug")&&(n.setLevel("debug"),s.on("all",function(){n.info.apply(n.info,[].slice.call(arguments,0))})),i(window).on("beforeunload",function(){return!s.config.get("debug")&&i.hasPendingRequest()?"Wow, you're quick! Your data is being saved. It will only take a moment.":void 0}),i(document).ajaxError(function(t,e,i,n){if("abort"!==e.statusText){var o="";o=0===e.status&&""===n?"The application is no longer responding.":'There is a communication problem with the server. <a href="#" onclick="location.reload()">Refreshing</a> the page may help.',s.notify({timeout:null,dismissable:!1,level:"error",header:"Uh oh.",message:o})}}),i(document).on("click","a",function(e){if(s.router){var i=this.pathname;"/"!==i.charAt(0)&&(i="/"+i);var n=t.history.root||"/";i.slice(0,n.length)===n&&(i=i.slice(n.length)),s.router.hasRoute(i)&&(e.preventDefault(),s.router.navigate(i,{trigger:!0}))}}),i(document).on("click","[data-route]",function(t){if(s.router){var e=i(t.target).attr("data-route");s.router.isNavigable(e)&&(t.preventDefault(),s.router.navigate(e,{trigger:!0}))}});var u="hidden",c={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};u in document?document.addEventListener("visibilitychange",r):(u="mozHidden")in document?document.addEventListener("mozvisibilitychange",r):(u="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",r):(u="msHidden")in document?document.addEventListener("msvisibilitychange",r):"onfocusin"in document?document.onfocusin=document.onfocusout=r:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=r});
//@ sourceMappingURL=setup.js.map