define(["underscore","backbone","../core","./base","./stats"],function(t,e,i,n,s){var o=function(t){var e=i.config.get("fields.instances."+t.id+".type");return e?e:t.type?t.type:(e=t.simple_type,t.enumerable||"boolean"===e?"choice":e)},r=n.Model.extend({constructor:function(){n.Model.prototype.constructor.apply(this,arguments);var t=this;this.links.stats&&(this.stats=new s.StatCollection,this.stats.url=function(){return t.links.stats})},parse:function(){this._cache={};var t=n.Model.prototype.parse.apply(this,arguments);return t.type=o(t),t},distribution:function(t,i){if(i!==!1&&(i=!0),void 0===this.links.distribution)return t(),void 0;if(i&&void 0!==this._cache.distribution)t(this._cache.distribution);else{var n=this;e.ajax({url:this.links.distribution,dataType:"json",success:function(e){return i&&(n._cache.distribution=e),t(e)}})}},values:function(t,i,n){if(n!==!1&&(n=!0),"function"==typeof t?(i=t,n=i,t={}):t&&(n=!1,"string"==typeof t&&(t={query:t})),!this.links.values)return i(),void 0;var s=e.$.Deferred();if(i&&s.done(i),n&&void 0!==this._cache.values)s.resolve(this._cache.values);else{var o=this;e.ajax({url:this.links.values,data:t,dataType:"json",success:function(t){n&&(o._cache.values=t),s.resolve(t)},error:function(){s.reject()}})}return s.promise()}}),a=n.Collection.extend({model:r,search:function(i,n){e.ajax({url:t.result(this,"url"),data:{query:i},dataType:"json",success:function(t){n(t)}})}});return{FieldModel:r,FieldCollection:a}});
//@ sourceMappingURL=field.js.map