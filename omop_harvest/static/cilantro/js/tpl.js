define(["module","text","underscore"],function(module,text,_){var settings=module.config()||{};return{load:function(t,e,i,n){return n.isBuild?(text.load.call(text,t,e,i,n),void 0):(e(["text!"+t],function(e){var n=e?_.template(e,void 0,settings):function(){return""};n._moduleName=t,i(n)}),void 0)},write:function(pluginName,moduleName,write,config){text.write.call(text,pluginName,moduleName,{asModule:function(name,contents){contents=contents.substr(contents.indexOf("return")+7),contents=contents.substr(0,contents.lastIndexOf(";")-3);try{var template=_.template(eval(contents),void 0,settings);write.asModule(pluginName+"!"+moduleName,"define(function() { var func = "+template.source+"; func._moduleName = '"+moduleName+"'; return func; });")}catch(err){throw console.error("~~~~~"),console.error("FAILED TO COMPILE "+pluginName+"!"+moduleName),console.error("Error:		"+String(err)),console.error("\n"),err&&err.source&&(console.error("Error Source:\n"),console.error(err.source),console.error("\n\n")),console.error("Original Contents:\n"),console.error(contents),console.error("\n\n"),err}}},config)}}});
//@ sourceMappingURL=tpl.js.map