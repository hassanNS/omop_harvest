define(["underscore","backbone","../core","./base","./field"],function(t,e,i,n,s){var o=n.Model.extend({constructor:function(){this.fields=new s.FieldCollection,n.Model.prototype.constructor.apply(this,arguments)},initialize:function(){n.Model.prototype.initialize.call(this,arguments),i.on(i.CONCEPT_FOCUS,function(t){this.id===t&&0===this.fields.length&&this.fields.fetch({reset:!0})},this)},parse:function(t,e){n.Model.prototype.parse.call(this,t,e);var i=this;return this.fields.url=function(){return i.links.fields},t?(t.fields&&(this.fields.set(t.fields,e),delete t.fields),t):void 0}}),r=n.Collection.extend({model:o,search:function(i,n){return e.ajax({url:t.result(this,"url"),data:{query:i,brief:1},dataType:"json",success:function(t){n(t)}})}}),a=r.extend({constructor:function(){this.queryable=new r,this.viewable=new r;var e=this;this.queryable.url=function(){return t.result(e,"url")},this.viewable.url=function(){return t.result(e,"url")},r.prototype.constructor.apply(this,arguments)},initialize:function(){this.on("add remove reset",function(){this.queryable.reset(this.filter(function(t){return!!t.get("queryable")||!!t.get("queryview")})),this.viewable.reset(this.filter(function(t){return!!t.get("viewable")||!!t.get("formatter_name")}))})}});return{Concept:o,Concepts:a}});
//@ sourceMappingURL=concept.js.map