define(["jquery","underscore","marionette","../core"],function(t,e,i,n){var s=i.ItemView.extend({className:"concept-info",template:"concept/info",ui:{name:".name",category:".category",description:".description",descriptionText:".description .text",descriptionToggle:".description .toggle"},events:{"click .category-link":"onCategoryLinkClick","click @ui.descriptionToggle":"toggleDescription"},initialize:function(){e.bindAll(this,"renderDescriptionToggle"),0===this.model.fields.length&&this.listenToOnce(this.model.fields,"reset",function(){this.render()})},onCategoryLinkClick:function(e){var i=t(e.target);n.panels.concept.triggerSearch(i.text())},serializeData:function(){var t=this.model.toJSON();if(1===this.model.fields.length){var e=this.model.fields.at(0);t.description||(t.description=e.get("description")),t.unit||(t.unit=e.get("unit"))}return t},onRender:function(){e.defer(this.renderDescriptionToggle),t(window).on("resize",this.renderDescriptionToggle)},onClose:function(){t(window).off("resize",this.renderDescriptionToggle)},descriptionOverflows:function(){var t=this.ui.descriptionText.prop("scrollWidth"),e=this.ui.descriptionText.prop("offsetWidth");return t>e},renderDescriptionToggle:function(){var t=this.ui.description.hasClass("ellipsis");this.ui.description.addClass("ellipsis"),this.descriptionOverflows()?(this.ui.descriptionToggle.show(),this.ui.description.toggleClass("ellipsis",t)):(this.ui.descriptionToggle.hide(),this.ui.description.addClass("ellipsis"))},toggleDescription:function(){if(this.ui.description.hasClass("ellipsis")){if(!this.descriptionOverflows())return;this.ui.description.removeClass("ellipsis")}else this.ui.description.addClass("ellipsis")}});return{ConceptInfo:s}});
//@ sourceMappingURL=info.js.map