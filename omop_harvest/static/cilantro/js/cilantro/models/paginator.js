define(["underscore","backbone","../core"],function(t,e,i){var n={comparator:"page_num",refresh:function(){var e=t.result(this,"url");if(this.pending){if(e===this.pending.url)return;this.pending.abort&&this.pending.abort()}var i=this;this.pending=this.fetch({reset:!0}).done(function(){delete i.pending,i.setCurrentPage(i.models[0].id)}),this.pending.url=e},parse:function(t,e){return e.reset||this.reset(null,{silent:!0}),this.perPage=t.per_page,this.trigger("change:pagesize",this,this.perPage),this.numPages=t.num_pages,this.trigger("change:pagecount",this,this.numPages),this.objectCount=t.object_count,this.trigger("change:objectcount",this,this.objectCount),this.currentPageNum=null,this.setCurrentPage(t.page_num),[t]},hasPage:function(t){return t>=1&&t<=this.numPages},hasNextPage:function(t){return t||(t=this.currentPageNum),t<this.numPages},hasPreviousPage:function(t){return t||(t=this.currentPageNum),t>1},setCurrentPage:function(t){if(t!==this.currentPageNum){if(!this.hasPage(t))throw new Error("Cannot set the current page out of bounds");return this.previousPageNum=this.currentPageNum,this.currentPageNum=t,this.trigger.apply(this,["change:currentpage",this].concat([].slice.call(this.getCurrentPageStats())))}},getPage:function(t,e){if(e||(e={}),this.hasPage(t)){var i=this.get(t);return i||e.load===!1||(i=new this.model({page_num:t}),i.pending=!0,this.add(i),i.fetch().done(function(){delete i.pending})),i&&e.active!==!1&&this.setCurrentPage(t),i}},getCurrentPage:function(t){return this.getPage(this.currentPageNum,t)},getFirstPage:function(t){return this.getPage(1,t)},getLastPage:function(t){return this.getPage(this.numPages,t)},getNextPage:function(t,e){return t||(t=this.currentPageNum),this.getPage(t+1,e)},getPreviousPage:function(t,e){return t||(t=this.currentPageNum),this.getPage(t-1,e)},pageIsLoading:function(t){t||(t=this.currentPageNum);var e=this.getPage(t,{active:!1,load:!1});return e?!!e.pending:void 0},getPageCount:function(){return this.numPages},getCurrentPageStats:function(){return[this.currentPageNum,{previous:this.previousPageNum,first:1===this.currentPageNum,last:this.currentPageNum===this.numPages}]}},s=e.Model.extend({idAttribute:"page_num",url:function(){var e=t.result(this.collection,"url");return i.utils.alterUrlParams(e,{page:this.id,per_page:this.collection.perPage})}}),o=e.Collection.extend({model:s});return t.extend(o.prototype,n),{PaginatorMixin:n,Page:s,Paginator:o}});
//@ sourceMappingURL=paginator.js.map