define(["underscore","./base","../button","../../constants"],function(t,e,i,n){var o=e.Control.extend({template:"controls/range/layout",events:{"keyup .range-lower, .range-upper":"_change","change .btn-select":"_change","click .range-help-button":"toggleHelpText"},ui:{operatorSelect:".btn-select",lowerBound:".range-lower",upperBound:".range-upper",help:".help-block"},initialize:function(){this._change=t.debounce(this.change,n.INPUT_DELAY)},onRender:function(){this.operatorSelect=new i.ButtonSelect({collection:[{value:"range",label:"between",selected:!0},{value:"-range",label:"not between"}]}),this.operatorSelect.render().$el.prependTo(this.$el),this.ui.help.hide(),this.renderBounds(),this.listenTo(this.model.stats,"reset",this.renderBounds)},renderBounds:function(){this.readMinMaxStats(),t.isUndefined(this.minLowerBound)||this.setLowerBoundPlaceholder(this.minLowerBound),t.isUndefined(this.maxUpperBound)||this.setUpperBoundPlaceholder(this.maxUpperBound)},parseMinStat:function(t){return t},parseMaxStat:function(t){return t},readMinMaxStats:function(){var e=this.model.stats.get("min"),i=this.model.stats.get("max");t.isUndefined(e)||(this.minLowerBound=this.parseMinStat(e.get("value"))),t.isUndefined(i)||(this.maxUpperBound=this.parseMaxStat(i.get("value")))},toggleHelpText:function(t){t.preventDefault(),this.ui.help.toggle()},getField:function(){return this.model.id},getOperator:function(){var t=this.ui.lowerBound.val(),e=this.ui.upperBound.val(),i=this.operatorSelect.getSelection(),n="range"!==i;return i=""!==t&&""!==e?i:""!==t?n?"lte":"gte":""!==e?n?"gte":"lte":void 0},getLowerBoundValue:function(){return this.ui.lowerBound.val()},getUpperBoundValue:function(){return this.ui.upperBound.val()},getValue:function(){var t,e=this.getLowerBoundValue(),i=this.getUpperBoundValue();return t=""!==e&&""!==i?[e,i]:""!==e?e:""!==i?i:null},setOperator:function(t){"-range"!==t&&(t="range"),this.operatorSelect.setSelection(t)},setLowerBoundPlaceholder:function(t){this.ui.lowerBound.prop("placeholder",t)},setLowerBoundValue:function(t){this.ui.lowerBound.val(t)},setUpperBoundPlaceholder:function(t){this.ui.upperBound.prop("placeholder",t)},setUpperBoundValue:function(t){this.ui.upperBound.val(t)},set:function(e){this.setOperator(e.operator),this.setUpperBoundValue(),this.setLowerBoundValue();var i=e.value;t.isArray(i)?(t.isUndefined(i[0])||this.setLowerBoundValue(i[0]),t.isUndefined(i[1])||this.setUpperBoundValue(i[1])):t.isUndefined(i)||("gte"===e.operator?this.setLowerBoundValue(i):this.setUpperBoundValue(i))},validate:function(e){return t.isUndefined(e.value)||t.isNull(e.value)?"A lower or upper value must be defined":t.isArray(e.value)&&e.value[0]>e.value[1]?"The lower bound cannot be greater than the upper":void 0}});return{RangeControl:o}});
//@ sourceMappingURL=range.js.map