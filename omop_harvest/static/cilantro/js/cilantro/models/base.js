define(["underscore","backbone"],function(t,e){var i=e.Model.extend({constructor:function(i,n){n=t.defaults({parse:!0},n),this.links={},e.Model.prototype.constructor.call(this,i,n),this.on("change:_links",this._parseLinks)},url:function(){return this.isNew()?e.Model.prototype.url.call(this):this.links.self},_parseLinks:function(e,i){var n={};t.each(i,function(t,e){n[e]=t.href}),e.links=n},parse:function(t){return t&&t._links&&this._parseLinks(this,t._links),t}}),n=e.Collection.extend({model:i}),s=n.extend({initialize:function(){this.session=this.add({session:!0})},reset:function(t,i){i=i||{},t=t||[];for(var s,o,r=0;r<t.length;r++)if(s=t[r],s instanceof e.Model?s.get("session")===!0&&(o=s.toJSON()):s&&s.session===!0&&(o=s),o){this.session.set(o,i),t.splice(r,1);break}return t.push(this.session),n.prototype.reset.call(this,t,i)},get:function(t){var i=!1;return t instanceof e.Model&&(i=t.get("session")),("session"===t||"object"==typeof t&&t.session)&&(i=!0),i?this.findWhere({session:!0}):n.prototype.get.call(this,t)},getSession:function(){return this.session}});return{Model:i,Collection:n,SessionCollection:s}});
//@ sourceMappingURL=base.js.map